= To-Do list of Bandera Negra
:author: Marcos Cruz (programandala.net)
:revdate: 2017-01-21

== New notes about the conversion to Forth

.2017-01-21:

Move the `name` double-cell array to far memory.

.2017-01-21:

Use more clear names like `walk-north?`, `sail-north?`, etc.


.2017-01-21:

Add 128K sound effects.

.2017-01-21:

Convert `beep`.

.2017-01-21:

Wait for the space key after the reports, to prevent the key to
activate a command after returning to the panel.

.2017-01-21:

Fix: the enemy ship appears for a moment after being sunk.

.2017-01-18:

Write `use-text-font`, `use-graph-font1`, `use-graph-font2`,
`use-native-text-font`?

.2017-01-12:

Move the palms into the word of their islands.

.2017-01-12:

Change `." X"` (4 bytes) to `'X' emit` (5 bytes) in some places,
because it's faster.

.2017-01-10, 2017-01-18:

Combine all graphics into one single UDG set:

- 95 chars from graph font 1
- 95 chars from graph font 2
- -1 (space common to both graph fonts)
- 21 UDG
- 16 block chars (perhaps not all of them are used)
- -1 useless empty block char

Total: 225 characters

Then add the characters needed for Spanish and Esperanto:

- 16 chars for Spanish: áéíóúüñÁÉÍÓÚÜÑ¡¿
- 12 chars for Esperanto: ĉĝĥĵŝŭĈĜĤĴŜŬ

|===
| Character codes  | Origin

| 0..31            | graph font 2
| 32..127          | graph font 1
| 128              | *not used*
| 129..143         | block chars
| 144..164         | UDG set
| 165..226         | graph font 2
| 227..242         | Spanish characters
| 243..254         | Esperanto characters
| 255              | *not used*
|===

Only the strings printed with graph font 2 must be adapted.

Problem: two sets of Spanish and Esperanto characters will be needed,
one for each font (sticks and twisty). Therefore they have to be
defined apart, as independet UDG sets, and activated when the
corresponding text font is selected.

.2017-01-08:

Simplify the ship damage calculations: Use only one counter and one
range.

.2017-01-08:

Convert `used-name`, `stamina` and maps to a character array, to save
memory.

.2017-01-08:

Remove `graphic-window`.

.2017-01-08, 2017-01-21:

Convert `possible-north` flag and family to calculations.



----
: +sea-north  ( n1 -- n2 )  sea-length +  ;
: +sea-south  ( n1 -- n2 )  sea-length -  ;
: +sea-east   ( n1 -- n2 )  1+  ;
: +sea-weast  ( n1 -- n2 )  1-  ;

: sea-to-north?  ( -- f )
  sea-loc @ sea-length + 

: island-to-north?  ( -- f

== Old notes (in Spanish)

NOTE: The following notes from the abandoned Master BASIC version are
still useful for the Forth version.

Desligar los valores en `seaMap` e `islandMap` de los objetos que
contienen (monedas, tiburón, barco enemigo, nativo...). Guardarlos en
una matriz independiente. Esto hará más claros los algoritmos y
evitará el problema de que la pantalla se redibuja cuando desaparece
un objeto (p.e., las monedas) tan solo porque ha cambiado el valor de
esa celda del mapa.

Tabla de mejores puntuaciones.

Hacer dos aspectos para el final: éxito y fracaso.

Ampliar `fn number$()` y usarla en la negociación.

Hacer, si no está, que se reciban provisiones, munición y tropa tras
vencer a un barco.

Dibujar escorpión y pantano.

Poder matar escorpión.

Borrar serpiente y escorpión cuando mueran.

Hacer variable el dibujo de provisiones.

Poner la pista en el bocadillo.

Reducir moral unas décimas cuando un hombre sea herido o muerto.

Reducir la energía un número proporcional a la gravedad del ataque, no
siempre 1.

Informar de que no se puede desembarcar porque la isla ya ha sido
visitada.

Revisar los rangos de doblones al comerciar.

Informar de si hay muertos cuando el bote es alcanzado por error.
Calcular `alive` antes y después de herir a los hombres.

Hacer que el jugador pueda poner nombre a los miembros de la
tripulación.

Hacer que el jugador pueda elegir nombre al capitán.

Añadir «Fin» a la lista de comandos.

Al embarcar, borrar panel antes de redibujar pantalla.

Hacer que el sol se imprima también al azar, pero no coincida con las
nubes.
